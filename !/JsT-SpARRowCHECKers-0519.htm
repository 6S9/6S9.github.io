<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<div id="Div0">
<center>
	<form name="f1" action="">
	用户：<input type="text" name="" id="n1" >
	<br/>
  密码：<input type="password" name="" id="p1">
  <br/>
	<input type="button" value="确认" onclick="EncryptAuth()"/>
	<input type="reset"/>
	</form>
</center>
</div>

<div id="Div1" style="display: none"></div>

<script type="text/javascript">

JsonFetch();

PathIdentify();

function PathIdentify() {
  let promiseAll = [], img = [];
  for(let i = 0 ; i < obj.ar.length ; i++){

    let myEle = document.createElement("span");
    myEle.id = "s"+i;
    let wrapper = document.getElementById("Div1");
    wrapper.appendChild(myEle);

     promiseAll[i] = new Promise((resolve, reject)=>{
         img[i] = new Image();
         img[i].src = obj.ar[i].u7;
         img[i].onload = function(){
           for(let j = 0 ; j < obj.ar.length ; j++){
             if (img[j].width > 0 && img[j].height > 0) {
               p="";
               } else {
                 p="https://slack-imgs.com/?url=";
                 }
                 document.getElementById("s"+j).innerHTML='<a data-fancybox="gallery" href="'+p+obj.ar[j].u7+
                 '"><img src="'+p+obj.ar[j].p2+'" width="64"></a>';
             }
              resolve(img[i])
         }
     })
 }
 Promise.all(promiseAll).then((img)=>{
 })
}

function JsonFetch() {
  var text = '{"ar":['+

  '{"t1":"sakura","p2":"'+
  'http://farm4.staticflickr.com/3864/14420d515212_9999c800b4_m.jpg'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'http://farm4.staticflickr.com/3864/14420s515212_9999c800b4_b.jpg'
  +'","a8":""}'

  +','+

  '{"t1":"sakura","p2":"'+
  'http://farm4.staticflickr.com/3864/14420515212_9999c800b4_m.jpg'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'http://farm4.staticflickr.com/3864/14420515212_9999c800b4_b.jpg'
  +'","a8":""}'

  +','+

  '{"t1":"","p2":"'+
  'https://pbs.twimg.com/media/Ev8-m-BVgAITNwN?format=jpg&name=thumb'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'https://pbs.twimg.com/media/Ev8-m-BVgAITNwN?format=jpg&name=orig'
  +'","a8":""}'

  +','+

  '{"t1":"trees","p2":"'+
  'http://farm8.staticflickr.com/7412/8732133694_0c7e400022_m.jpg'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'http://farm8.staticflickr.com/7412/8732133694_0c7e400022_b.jpg'
  +'","a8":""}'

  +','+

  '{"t1":"water","p2":"'+
  'http://farm4.staticflickr.com/3745/8971419780_cb88b22947_m.jpg'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'http://farm4.staticflickr.com/3745/8971419780_cb88b22947_b.jpg'
  +'","a8":""}'

  +','+

  '{"t1":"flower","p2":"'+
  'https://source.unsplash.com/ty4X72BSsXY/416x278'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'https://source.unsplash.com/ty4X72BSsXY/1279x853'
  +'","a8":""}'

  +','+

  '{"t1":"flower","p2":"'+
  'https://pbs.twimg.com/media/Ev8-m-BVgAITNwN?format=jpg&name=thumb'
  +'","t3":"","w4":"","h5":"","t6":"","u7":"'+
  'https://pbs.twimg.com/media/Ev8-m-BVgAITNwN?format=jpg&name=orig'
  +'","a8":""}'

  +']}';

  obj = JSON.parse(text);
}

function EncryptAuth() {
  var name=document.getElementById("n1").value;
  var pass=document.getElementById("p1").value;
  if(name==!/[^\s]/.test(new Date().getTime()) && pass==String.fromCharCode(window.atob("MTIx"))){
    document.getElementById("Div1").style.display=""
  }else{
  }
}
</script>
